@using System.Linq
@using Microsoft.AspNetCore.Identity
@using JamesQMurphy.Auth
@using JamesQMurphy.Web.Controllers
@model JamesQMurphy.Web.Models.AccountViewModels.LoginViewModel
@inject SignInManager<ApplicationUser> SignInManager


    <section>
        @{
            var loginProviders = (await SignInManager.GetExternalAuthenticationSchemesAsync()).ToList();
            if (loginProviders.Count > 0)
            {
                <form asp-action="@nameof(accountController.loginexternal)" asp-route-returnurl="@ViewData["ReturnUrl"]" method="post" class="form-horizontal">
                    <div>
                        @foreach (var provider in loginProviders)
                        {
                        <div class="form-group">
                            <button type="submit" class="btn btn-secondary w-100" name="provider" value="@provider.Name" title="Sign in using your @provider.DisplayName account">Sign in with @provider.DisplayName</button>
                        </div>
                        }
                    </div>
                </form>
            }
        }
    </section>
